const w="growi-plugin-vivliostyle-preview";let o,r;function a(){return window.__MY_PLUGIN_STATE__||(window.__MY_PLUGIN_STATE__={isEditPreview:!1,lastMode:null}),window.__MY_PLUGIN_STATE__}const d=()=>{if(growiFacade==null||growiFacade.markdownRenderer==null||growiFacade.markdownRenderer.optionsGenerators==null)return;const{optionsGenerators:e}=growiFacade.markdownRenderer;o=e.customGenerateViewOptions,r=e.customGeneratePreviewOptions,e.customGenerateViewOptions=(...s)=>{const t=a();t.isEditPreview=!1,t.lastMode="view";const i=o??e.generateViewOptions;return i?i(...s):{}},e.customGeneratePreviewOptions=(...s)=>{const t=a();t.isEditPreview=!0,t.lastMode="preview";const i=r??e.generatePreviewOptions;return i?i(...s):{}};const n=a();console.log(`[${w}] activated. initial state:`,n)},l=()=>{var e;if((e=growiFacade==null?void 0:growiFacade.markdownRenderer)!=null&&e.optionsGenerators){const{optionsGenerators:n}=growiFacade.markdownRenderer;o&&(n.customGenerateViewOptions=o),r&&(n.customGeneratePreviewOptions=r)}console.log(`[${w}] deactivated.`)};window.pluginActivators==null&&(window.pluginActivators={});window.pluginActivators[w]={activate:d,deactivate:l};
